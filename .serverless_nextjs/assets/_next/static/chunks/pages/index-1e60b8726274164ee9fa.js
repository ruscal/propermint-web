(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4887:function(n,t,e){"use strict";e.d(t,{y:function(){return x}});var r=e(5861),o=e(7757),s=e.n(o),c=(e(7294),e(1664)),a=e(7828),i=e(7388),u=e(3961),d=[240,320,480,640,750,1080];function p(n){return d.map((function(t){return"".concat(f(n,t)," ").concat(t,"w")})).join(",")}function l(n){return f(n,d[0])}function f(n,t){return"".concat("https://m.propermint.life").concat("/public/images/").concat(n,"/").concat(t,".jpg")}var h=e(5893),I=function(n){var t=n.imageId;return(0,h.jsx)("img",{className:"object-cover w-full",src:l(t),srcSet:p(t)})},x=function(n){var t=n.post,e=n.canEdit,o=void 0!==e&&e,d=n.onDeleted;function p(){return(p=(0,r.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("postId: ",t),n.next=3,i.b.graphql({query:u.fR,variables:{postId:t},authMode:"AMAZON_COGNITO_USER_POOLS"});case 3:d();case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,h.jsx)(c.default,{href:"/posts/".concat(t.postId),children:(0,h.jsxs)("div",{children:[t.imagePath&&(0,h.jsx)(I,{imageId:t.postId}),t.content&&(0,h.jsx)(a.Z,{children:t.content}),o&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.default,{href:"/edit-post/".concat(t.postId),children:(0,h.jsx)("a",{style:m,children:"Edit Post"})}),(0,h.jsx)(c.default,{href:"/posts/".concat(t.postId),children:(0,h.jsx)("a",{style:m,children:"View Post"})}),(0,h.jsx)("button",{style:g,onClick:function(){return function(n){return p.apply(this,arguments)}(t.postId)},children:"Delete Post"})]})]})},t.postId)},m={cursor:"pointer",borderBottom:"1px solid rgba(0, 0, 0 ,.1)",padding:"20px 0px"},g={cursor:"pointer",backgroundColor:"#ddd",border:"none",padding:"5px 20px"}},3084:function(n,t,e){"use strict";e.d(t,{E:function(){return o}});var r=e(5893),o=function(n){var t=n.children;return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:t})}},3961:function(n,t,e){"use strict";e.d(t,{aA:function(){return r},MH:function(){return o},qb:function(){return s},fR:function(){return c}});var r="\n    query ListPosts($channelId: ID!) {\n        listPosts(channelId: $channelId) {\n            postId\n            title\n            content\n            imagePath\n            author\n        }\n    }\n",o="\n    query PostsByUsername($channelId: ID!) {\n        postsByUsername(channelId: $channelId) {\n            postId\n            title\n            content\n            imagePath\n            author\n        }\n    }\n",s="\n    mutation CreatePost($post: PostInput!) {\n        createPost(post: $post) {\n            postId\n            title\n            content\n            imagePath\n            author\n        }\n    }\n",c="\n    mutation DeletePost($postId: ID!) {\n        deletePost(postId: $postId)\n    }\n"},6839:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSP:function(){return l}});var r=e(5861),o=e(7757),s=e.n(o),c=e(7294),a=e(7388),i=e(3961),u=e(4887),d=e(3084),p=e(5893);var l=!0;t.default=function(n){var t=n.channelId,e=(0,c.useState)([]),o=e[0],l=e[1];function f(){return(f=(0,r.Z)(s().mark((function n(){var e;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.b.graphql({query:i.aA,variables:{channelId:t}});case 2:e=n.sent,console.log("postData: ",e),l(e.data.listPosts);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,c.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),(0,p.jsx)(d.E,{children:o.map((function(n){return(0,p.jsx)(u.y,{post:n},n.id)}))})}},5301:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(6839)}])}},function(n){n.O(0,[774,388,828,888,179],(function(){return t=5301,n(n.s=t);var t}));var t=n.O();_N_E=t}]);